.p-issuearticle-show,
.p-digitalpublicationsection-show {
  @extend %sticky-sidebar;

  @each $name in ('xsmall', 'small', 'medium') {
    @include breakpoint('#{$name}') {
      .g-header {
        border-bottom: 1px solid $color__rules--primary;
      }

      .g-header__inner {
        border-bottom: none;
      }
    }
  }

  .m-journal-mobile {
    position: relative;
    padding-top: 13px;
    padding-bottom: 13px;

    &::before {
      content: '';
      position: absolute;
      z-index: -1;
      left: 50%;
      top: 0;
      bottom: 0;
      width: 100vw;
      margin-left: -50vw;
      pointer-events: none;
      background-color: $color__bg--primary;
      border-bottom: 1px solid $color__rules--primary;
    }

    .icon--menu--24 {
      top: -4px;
      position: relative;
      margin-right: 8px;
      margin-left: -10px;
    }

    .f-list-1 {
      @include untuck();
    }

    button {
      cursor: pointer;
      color: $color__link;

      background: none;
      border: none;

      &:hover,
      &:focus:hover {
        color: $color__link--hover;
      }

      &:active:hover {
        color: $color__link--active;
      }
    }
  }

  .m-search-triggers--journal {
    justify-content: flex-start;

    left: 40px;
    bottom: -50px;

    transition: bottom .25s $bezier--bounce;

    &.m-search-triggers--active {
      bottom: 40px;
    }

    @include breakpoint('large+') {
      display: none;
    }

    .icon--menu--24 {
      top: -2px;
      position: relative;
    }
  }

  .o-article__body::before {
    position: absolute;
    background-color: $color__rules--primary;
    width: 1px;

    @include breakpoint('large+') {
      content: '';
    }

    @each $name in ('large', 'xlarge') {
      @include breakpoint('#{$name}') {
        left: #{- colspan(1, '#{$name}')};
        top: -100%;
        height: 200%;
      }
    }
  }

  .s-sans-serif-loaded .o-blocks>p:not([class*=f-]),
  .s-sans-serif-loaded .o-blocks>ol:not([class*=f-]):not([class*=o-]):not([class*=m-]),
  .s-sans-serif-loaded .o-blocks>ul:not([class*=f-]):not([class*=o-]):not([class*=m-]) {
    font-family: inherit;
  }

  .o-blocks>p:not([class*=f-]),
  .o-blocks>ol:not([class*=f-]):not([class*=o-]):not([class*=m-]),
  .o-blocks>ul:not([class*=f-]):not([class*=o-]):not([class*=m-]) {
    font-family: $serif-font;
  }

  .s-serif-loaded .o-blocks>p:not([class*=f-]),
  .s-serif-loaded .o-blocks>ol:not([class*=f-]):not([class*=o-]):not([class*=m-]),
  .s-serif-loaded .o-blocks>ul:not([class*=f-]):not([class*=o-]):not([class*=m-]) {
    font-family: $serif-font--loaded;
  }

  .o-blocks > p {
    @include f-body-editorial;
  }

  .o-article {
    padding-bottom: 0;
  }

  .o-article__intro {
    padding-top: 30px;
    margin-top: 0;
    border-top: 0;
  }

  .o-article--journal_abstract {
    margin-top: 30px;
  }

  .o-article__body {
    padding-top: 0;
    margin-top: 25px;
  }

  .o-article__primary-actions {
    padding-top: 0;
    margin-top: 0;

    display: none;

    @include breakpoint('large+') {
      display: block;
    }

    .m-article-actions--journal__logo {
      a {
        color: $color__black--90;
      }

      .icon--journal-logo {
        height: 92px;
        width: 120px;
      }
    }

    @each $name, $point in $breakpoints {
      @include breakpoint('#{$name}') {
        .m-article-actions--journal__issues {
          margin-top: #{map-get((
            xsmall: 24,
            small: 24,
            medium: 24,
            large: 24,
            xlarge: 30
          ), $name)}px;
        }
      }
    }
  }

  .o-article__secondary-actions {
    margin-top: 0;
    padding-top: 0;
  }

  .m-article-header--journal-article {
    padding-top: 0;
    margin-bottom: 0 !important; // bad

    .m-article-header__img,
    .m-article-header__text {
      width: 100vw;

      margin-left: -#{map-get($outer-gutters, medium)};

      @include breakpoint('large') {
        // full width - one gutter - (left sidebar width)
        width: 100vw - map-get($outer-gutters, large) - (colspan(13, large) + colspan(1, large));
        margin-left: -#{colspan(1, large)};
      }

      @include breakpoint('xlarge') {
        // (main column width - left sidebar width) + (right gutter width)
        width: calc(#{map-get($main-col-widths, xlarge) - (colspan(13, xlarge) + colspan(1, xlarge))} + (100vw - #{map-get($main-col-widths, xlarge)}) / 2);
        margin-left: -#{colspan(1, xlarge)};
      }
    }

    .m-article-header__img {
      min-height: 240px;
      height: 60vh;

      img {
        width: 100%;
        height: 100%;
        object-fit: cover;
      }
    }

    .m-article-header__text {
      position: absolute;
      bottom: 0;

      padding-bottom: 30px;
      padding-top: 30px;

      background-color: rgba(255,255,255,0.75);

      h1 {
        @include untuck;
        margin-top: 0;

        @each $name, $point in ('xsmall', 'small', 'medium') {
          @include breakpoint('#{$name}') {
            padding-left: map-get($outer-gutters, $name);
            padding-right: map-get($outer-gutters, $name);
          }
        }

        @each $name, $point in ('large', 'xlarge') {
          @include breakpoint('#{$name}') {
            padding-left: colspan(1, $name);
            padding-right: colspan(1, $name);
            width: colspan(30, $name);
          }
        }
      }
    }
  }

  .o-accordion--journal-articles {
    margin-bottom: 25px;

    h3 {
      margin-top: 25px;
      padding: 0;
    }

    .o-accordion__trigger {
      padding-bottom: 20px;
      padding-top: 10px;
    }

    .o-accordion__trigger-icon {
      margin-top: -20px;
    }

    .o-accordion__panel-content {
      padding-bottom: 15px;
      border-bottom: 2px solid $color__rules--primary;

      &.o-blocks>:last-child {
        margin-bottom: 0;
      }
    }
  }

  .m-article-actions {
    margin-top: 25px;
    margin-bottom: 25px;
  }
}

/***

Digital Publications
=====

Styling related specifically to digital publications
***/
.p-digitalpublicationsection-show {
  .m-article-header--journal-article {
    .m-article-header__text {
      background-color: rgba(0,0,0,0.75);

      .f-headline-editorial {
        color: #fff;
      }
    }
  }

  .o-blocks {
    padding-top: 5px;

    .author-links {
      a {
        color: $color__link--accent;
      }

      a:hover {
        color: $color__link--accent-hover;
        text-decoration: underline;
      }

      a:active {
        color: $color__link--accent-active;
      }
    }

    .quote {
      padding-top: 40px;
      padding-bottom: 50px;
      border-bottom: 1px solid #e6e6e6;
      .quote__icon {
        display: none;
      }
    }
  }

  .o-blocks>ol,
  .o-blocks>ul {
    @extend .list;
  }

  .m-article-header--generic-no-breadcrumb .m-article-header__text {
    padding-left: 0;
    padding-right: 0;
  }

  .o-article__body.o-article__body--no-top-border {
    border-top: 0;
  }

  .o-blocks.f-body>p,
  .o-blocks.f-body>ol,
  .o-blocks.f-body>ul {
    font-family: $sans-serif-font--loaded;
    font-weight: 300;
  }

  // Heading
  .o-article__intro {
    padding-top: 0;
  }

  // Gallery block in the light theme
  .o-gallery.o-gallery----theme-2 {
    background-color: $color__bg;
    border-top: 1px solid $color__rules--secondary;

    .hr {
      border-top: 0;
    }

    .o-gallery__title.f-module-title-2 {
      margin-top: 20px;
    }

    .o-gallery__caption .f-caption {
      @extend %f-body;
      font-family: $sans-serif-font--loaded;
      font-weight: 300;
    }
  }
}
