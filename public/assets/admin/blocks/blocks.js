SirTrevor.Blocks.Base=function(){return SirTrevor.Block.extend({optionLibrary:function(){return this.option_library},optionCrop:function(){return this.option_crop},optionCropRatio:function(){return this.option_crop_ratio},optionCallbackCrop:function(){return"callbackUpdateCropData"},isLoaded:!1,getMediaContainerClosest:function(e){return e.closest("[data-images-containers]")},getAllMediaContainer:function(){var e=this.$editor.find("[data-images-containers]");return!!e.length&&e},getImageIdField:function(e){return e.find("[data-image-id]")},getMediaLibraryOptions:function(e,t,a,i){return{type:"iframe",title:i,url:e+"?role="+t,meta:{mode:"inserting",role:t,callback:a,"single-selection":"true"}}},getCropOptions:function(e,t,a,i,n,r,o){return{type:"iframe",title:i,url:e+"?role="+t+"&id="+n+"&crop="+encodeURIComponent(r)+"&ratio="+o,meta:{role:t,callback:a}}},getPreviewMode:function(){var e=this,t=e.$editor,a=t.find(".a17cms-preview-mode");return a.length||(t.append("<div class='a17cms-preview-mode'></div>"),a=t.find(".a17cms-preview-mode")),a},updatePreview:function(){function e(e){var t=a.find(".a17cms-preview-mode");t.length>0?t.empty().append(e):a.append("<div class='a17cms-preview-mode'>"+e+"</div>")}var t=this,a=t.$editor,i=t.getInputBlock(),n=i.serializeJSON(),r={type:t.type,data:n},o=a.find(".field_with_lang.selected").first().data("lang"),l=t.option_template,s="<button type='button' class='btn btn-primary a17-edit-button'>Edit</button>",d="<button type='button' class='btn btn-primary a17-edit-button' style='display:block; background-color: #e61414;'>Block error</button>";console.log("updatePreview"),console.log(r),e("<div class='a17cms-preview-mode-loader'>Loading "+t.type+"...</div>"),o&&(l+="?locale="+o),$.ajax({url:l,data:r,type:"POST"}).done(function(t){e(t+s)}).fail(function(a,i,r){t.consoleMessage("Can't find the preview of the block (updatePreview)"),console.log(n),e(d)}).always(function(){t.bindPreviewButton(),t.performValidations()})},setEditor:function(){var e=this;this.$editor.attr("id",e.uniqId)},validationFailMsg:function(){return i18n.t("errors:validation_fail",{type:this.title})},_serializeData:function(){var e={};return this.hasTextBlock()&&(e.text=this.getTextBlockHTML(),e.isHtml=!0),this.$(":input").not(".st-paste-block").length>0&&(e=this.$(":input").not(".st-paste-block").serializeJSON()),e},setDataToField:function(e,t){if(e.length)switch(e.prop("type")){case"text":case"hidden":e.val(t);break;case"radio":case"checkbox":e.prop("checked",!1),e.filter('*[value="'+t+'"]').prop("checked",!0);break;case"select":e.find("option").prop("selected",!1),e.find('option[value="'+t+'"]').prop("selected",!0);break;default:e.val(t)}},buildOnLoad:function(){this.buildTemplate()},buildTemplate:function(){},beforeBlockRender:function(){var e=this;_.isUndefined(this.uniqId)&&(this.uniqId=e.getUniqId("a17cms-editor"))},backToEdit:function(){this.$editor.find(".a17cms-editor-mode").show(),this.$editor.find(".a17cms-preview-mode").hide()},showPreviewMode:function(e,t){var a=this,i=this.$editor,n=i.find(".a17cms-editor-mode"),r=i.find(".a17cms-preview-mode"),o=_.template(e);n.hide(),r.html(o(t)),r.append("<button type='button' class='btn btn-primary a17-edit-button'>Edit</button>"),a.bindPreviewButton()},bindPreviewButton:function(){var e=this,t=this.$editor,a=t.find(".a17cms-preview-mode");a.find(".btn-primary").on("click",function(t){t.preventDefault,e.backToEdit()})},submitData:function(){var e=this,t=e.getInputBlock();data=t.serializeJSON(),e.valid()&&e.setAndLoadData(data)},getInputClass:function(){return"a17-input-block"},getInputBlock:function(){return _.isUndefined(this.input_block)&&(this.input_block=this.$("."+this.getInputClass())),this.input_block},getSubmitBlock:function(){return _.isUndefined(this.submit_block)&&(this.submit_block=this.$(".a17-submit-block")),this.submit_block},getUniqId:function(e){var t=(new Date).getTime().toString(16);return e+"-"+t},bindAutoResize:function(e){var t=this;e.filter("textarea").on("focus, blur",function(e){t.autoResizeInputBlock(this)}),e.filter("textarea").on("keyup.key_autoresize",function(e){t.autoResizeInputBlock(this)}),setTimeout(function(){e.filter("textarea").each(function(){t.autoResizeInputBlock(this)})},250)},autoResizeInputBlock:function(e){var t=$(e),a=this.$editor.find("*[data-name='"+t.attr("name")+"']");content=t.val(),content=content.replace(/\n/g,"<br>"),a.html(content+"<br>");var i=Math.max(60,a.height());a.hide(),t.css("height",i)},afterBlockRender:function(){var e=this,t=this.getInputBlock(),a=t.filter("textarea");if(this.option_class){var i=this.option_class;a.addClass(i)}a.length&&a.each(function(){$(this).hasClass("textarea-medium-editor")&&e.setMediumEditor($(this),e.option_settings)})},setMediumEditor:function(e,t){var a=this,t=t?t:{},i="medium_editor_"+e.attr("name")+"_"+a.uniqId;window[i]=new MediumEditor(e.get(0),t);var n=window[i].elements[0];$(n).on("input",function(){$(n).find("[style]").contents().unwrap()}),e.is("[data-medium-editor-show-button]")&&a17cms.Helpers.show_medium_editor_source(e)}})}(),SirTrevor.Blocks.Masterdiaporama=function(){return SirTrevor.Blocks.Base.extend({consoleMessage:function(e){console.warn("Blocks Editor – Error : "+e)},optionCallback:function(){return"callbackUpdateImageIds"},getListImagesHTML:function(e){var t=this,a=e.val(),i=e.prev(),n="";if(""!==a){var r=a.split(",");r.length&&$.each(r,function(e){var t=r[e];n+="<div class='a17cms-image-thumbnail' data-id='"+t+"'>",n+="<div class='a17cms-image-thumbnail-inner'>",n+="<img src='data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7' data-id='"+t+"' />",n+="<a href='#' data-remove-images='"+t+"' class='a17cms-image-trash'></a>",n+="<a href='#' class='a17cms-image-sortable-handle'></a>",n+="</div>",n+="</div>"})}i.html(n),$imagesToLoad=i.find("img[data-id]"),$imagesToLoad.length&&$.each($imagesToLoad,function(){t.getImageSRC($(this))})},getImageSRC:function(e){var t=this,a=e.data("id");$.ajax({url:t.option_library_thumbnail,data:{id:a}}).done(function(t){e.attr("src",t).removeAttr("data-id")}).fail(function(e,i,n){t.consoleMessage("Can't find the image URL in Items with ID : "+a+" (getListImagesHTML)")})},loadData:function(e){var t=this,a=t.getInputBlock();t.isLoaded=!0,$.each(e,function(e,i){var n=a.filter('*[name="'+e+'"]');n.length&&t.setDataToField(n,i)}),t.buildTemplate()},onBlockRender:function(){var e=this,t=e.$editor,a=e.getInputBlock(),i=e.getSubmitBlock();e.setEditor(),e.isLoaded===!1&&e.buildNewBlock();var n=e.getAllMediaContainer();return i.on("click",function(t){t.preventDefault(),data=a.serializeJSON(),e.$editor.find(".a17cms-form-editor").hide(),e.$editor.find(".a17-preview-editor").show(),e.setAndLoadData(data)}),0!=n.length&&(n.each(function(t){var a=e.uniqId+t;e.bindItemsContainer($(this),a)}),a17cms.LoadBehavior(t.get(0)),$(window).trigger("a17cms.lang_switcher.refresh"),void e.afterBlockRender())},bindItemsContainer:function(e,t){var a=this,i=a.optionLibrary(),n=a.optionCrop(),r=a.optionCallback(),o=a.optionCallbackCrop(),l=a.optionCropRatio(),s=e.find("[data-bt-images]"),d=e.find("[data-crop-image]"),c=a.getImageIdField(e),m=e.find(".a17cms-image-list");e.attr("id",t),m.sortable({handle:".a17cms-image-sortable-handle",forcePlaceholderSize:!0,placeholder:"a17cms-image-thumbnail a17cms-image-thumbnail-placeholder",update:function(e,t){var i=[];m.children().each(function(){i.push($(this).data("id"))}),c.val(i.join(",")),a.updatePreview()}}),m.disableSelection(),e.on("click","[data-remove-images]",function(e){e.preventDefault();var t=$(this),i=parseInt(t.data("remove-images")),n=a.getMediaContainerClosest(t),r=a.getImageIdField(n);if(i>0){var o=r.val().split(",").map(Number),l=o.indexOf(i);l!=-1&&o.splice(l,1),r.val(o.join(",")),r.trigger("refresh:image_thumbnails"),o.length||(d.addClass("disabled"),n.find("[data-crop]").val(""))}}),s.on("click",function(e){e.preventDefault();var n=a.getMediaLibraryOptions(i,t,r,"Add Image");$.event.trigger({type:"modal_open",modal_config:n})}),d.on("click",function(e){e.preventDefault();var i=$(this),r=i.text(),s=a.getMediaContainerClosest(i),d=a.getImageIdField(s).val().split(","),c=s.find("[data-crop]").val(),m=a.getCropOptions(n,t,o,r,d[0],c,l);$.event.trigger({type:"modal_open",modal_config:m})}),c.on("refresh:image_thumbnails",function(e){var t=$(this);a.getListImagesHTML(t),a.updatePreview()}),c.on("show:crop_button",function(e){d.removeClass("disabled")}),c.trigger("refresh:image_thumbnails"),c.val()&&d.removeClass("disabled")},buildTemplate:function(){var e=this,t=e.$editor,a=t.find(".a17cms-editor-mode"),i=e.getPreviewMode();e.updatePreview(),i.show(),a.hide()},buildNewBlock:function(){var e=this,t=e.$editor,a=t.find(".a17cms-editor-mode"),i=e.getPreviewMode();i.hide(),a.show()}})}(),SirTrevor.Blocks.Masterpreview=function(){return SirTrevor.Blocks.Base.extend({consoleMessage:function(e){console.warn("Blocks Editor – Error : "+e)},optionCallback:function(){return"callbackUpdateImageId"},optionCallbackResource:function(){return"callbackUpdateResourceId"},getResourceContainerClosest:function(e){return e.closest("[data-resources-containers]")},getAllResourceContainer:function(){var e=this.$editor.find("[data-resources-containers]");return!!e.length&&e},getResourceIdField:function(e){return e.find("[data-resource-id]")},getThumbImageHTML:function(e){var t=this,a="",i=e.val();""!==i?$.ajax({url:t.option_library_thumbnail,data:{id:i}}).done(function(e){a+="<div class='a17cms-image-thumbnail'>",a+="<div class='a17cms-image-thumbnail-inner'>",a+="<img src='"+e+"' />",a+="</div>",a+="</div>"}).fail(function(e,a,n){t.consoleMessage("Can't find the image URL in Items with ID : "+i+" (getListImagesHTML)"),console.log(i)}).always(function(){e.prev().html(a)}):e.prev().html(a)},loadData:function(e){console.warn("loadData");var t=this,a=t.getInputBlock();t.isLoaded=!0,$.each(e,function(e,i){var n=a.filter('*[name="'+e+'"]');n.length&&t.setDataToField(n,i)}),t.afterLoadData(e),t.buildTemplate()},afterLoadData:function(e){},onBlockRender:function(){console.warn("onBlockRender");var e=this,t=e.$editor,a=e.getInputBlock(),i=e.getSubmitBlock();e.setEditor(),e.isLoaded===!1&&e.buildNewBlock(),i.on("click",function(t){t.preventDefault(),data=a.serializeJSON(),e.$editor.find(".a17cms-form-editor").hide(),e.$editor.find(".a17-preview-editor").show(),e.setAndLoadData(data)});var n=e.getAllMediaContainer();n.length&&n.each(function(t){var a=e.uniqId+t;e.bindMediaContainer($(this),a)});var n=e.getAllResourceContainer();n.length&&n.each(function(t){var a=e.uniqId+t+t;e.bindResourceContainer($(this),a)}),a17cms.LoadBehavior(t.get(0)),$(window).trigger("a17cms.lang_switcher.refresh"),e.afterBlockRender()},bindMediaContainer:function(e,t){var a=this,i=a.optionLibrary(),n=a.optionCrop(),r=a.optionCallback(),o=a.optionCallbackCrop(),l=a.optionCropRatio(),s=e.find("[data-bt-image]"),d=e.find("[data-remove-image]"),c=e.find("[data-crop-image]"),m=a.getImageIdField(e);e.attr("id",t),d.on("click",function(e){e.preventDefault();var t=$(this),i=a.getMediaContainerClosest(t),n=a.getImageIdField(i);n.val(""),i.find("[data-crop]").val(""),n.trigger("refresh:image_thumbnails"),c.addClass("disabled"),t.addClass("disabled")}),s.on("click",function(e){e.preventDefault();var n=$(this).text(),o=a.getMediaLibraryOptions(i,t,r,n);$.event.trigger({type:"modal_open",modal_config:o})}),c.on("click",function(e){e.preventDefault();var i=$(this),r=i.text(),s=a.getMediaContainerClosest(i),d=a.getImageIdField(s).val(),c=s.find("[data-crop]").val(),m=a.getCropOptions(n,t,o,r,d,c,l);$.event.trigger({type:"modal_open",modal_config:m})}),m.on("refresh:image_thumbnails",function(e){var t=$(this);a.getThumbImageHTML(t),a.updatePreview()}),m.on("show:crop_button",function(e){c.removeClass("disabled")}),m.on("show:remove_button",function(e){d.removeClass("disabled")}),a.getThumbImageHTML(m),m.val()&&(m.trigger("show:crop_button"),m.trigger("show:remove_button"))},bindResourceContainer:function(e,t){function a(){var t=e.find("[data-resource-title]"),a=e.find("[data-resource-title-input]");""==s.val()?(o.show(),l.hide(),t.text("").hide(),t.next("small").show()):(o.hide(),l.show(),t.text(a.val()).show(),t.next("small").hide())}var i=this,n=i.option_browser,r=i.optionCallbackResource(),o=e.find("[data-bt-resource]"),l=e.find("[data-remove-resource]"),s=i.getResourceIdField(e);e.attr("id",t),l.on("click",function(e){e.preventDefault();var t=$(this),n=i.getResourceContainerClosest(t),r=i.getResourceIdField(n);r.val(""),r.trigger("refresh:resource_id"),l.hide(),a()}),o.on("click",function(e){e.preventDefault();var a=$(this).text(),o=i.getMediaLibraryOptions(n,t,r,a);$.event.trigger({type:"modal_open",modal_config:o})}),s.on("refresh:resource_id",function(e){i.updatePreview(),a()}),a()},buildTemplate:function(){var e=this,t=e.$editor,a=t.find(".a17cms-editor-mode"),i=e.getPreviewMode();e.updatePreview(),i.show(),a.hide()},buildNewBlock:function(){var e=this,t=e.$editor,a=t.find(".a17cms-editor-mode"),i=e.getPreviewMode();i.hide(),a.show()}})}(),a17cms.Helpers.sirTrevorBaseDiaporamaEditor=function(e){var t={bt_label:"Add Images",bt_label_crop:"Crop first image",note:"",name:"image_id",crop_field_name:"image_id_crop"},a=""!=t.note?"<small class='a17-small-note hint' style='display:inline-block; margin-left:15px;'>"+t.note+"</small>":"",i="<div class='input' data-images-containers>";return i+="<div class='a17cms-image-list'></div>",i+="<input type='hidden' class='a17-input-block' name='"+t.name+"' autocomplete='false' data-image-id />",i+="<input type='hidden' class='a17-input-block' name='"+t.crop_field_name+"' autocomplete='false' data-crop />",i+="<button type='button' class='btn btn-small' data-bt-images>"+t.bt_label+"</button> ",i+="<button type='button' class='btn btn-small btn-border disabled' data-crop-image>"+t.bt_label_crop+"</button> ",i+=a,i+="</div>"},a17cms.Helpers.sirTrevorBaseEditor=function(e,t){var e=""!=e?"<div class='input'><h3>"+e+"</h3></div>":"",a="<div class='a17cms-editor'>";return a+="<div class='a17cms-editor-mode'>",a+=e,a+=t,a+="<div class='input input-centered'><button type='button' class='btn btn-primary a17-submit-block'>Preview</button></div>",a+="</div>",a+="</div>"},a17cms.Helpers.sirTrevorMetadata=function(e){return'<input type="hidden" name="'+e.name+"["+e.index+"]["+e.key+']" data-name="'+e.name+"[<% item_index %>]["+e.key+']" data-item-id="'+e.id+'" value="'+e.value+'" >'},a17cms.Helpers.sirTrevorBaseImageEditor=function(e){var e=e||{},t={bt_label:"Add Image",bt_label_remove:"Remove Image",bt_label_crop:"Crop Image",note:"",name:"image_id",crop_field_name:"image_id_crop"};$.extend(!0,t,e);var a=""!=t.note?"<small class='a17-small-note hint' style='display:block; margin-top:15px;'>"+t.note+"</small>":"",i="<div class='input a17cms-image-list--single' data-images-containers>";return i+="<div class='a17cms-image-list'></div>",i+="<input type='hidden' class='a17-input-block' name='"+t.name+"' autocomplete='false' data-image-id />",i+="<input type='hidden' class='a17-input-block' name='"+t.crop_field_name+"' autocomplete='false' data-crop />",i+="<button type='button' class='btn btn-small' data-bt-image>"+t.bt_label+"</button> ",i+="<button type='button' class='btn btn-small btn-border disabled' data-crop-image>"+t.bt_label_crop+"</button> ",i+="<button type='button' class='btn btn-small btn-border disabled' data-remove-image>"+t.bt_label_remove+"</button>",i+=a,i+="</div>"},a17cms.Helpers.sirTrevorBaseLanguageFields=function(e,t){var a="",t="undefined"!=typeof BLOCK_LANGUAGES?BLOCK_LANGUAGES:"undefined"!=typeof DEFAULT_BLOCK_LANGUAGE?[DEFAULT_BLOCK_LANGUAGE]:["en"];for(i=0;i<e.length;i++){var n=e[i];for(j=0;j<t.length;j++){var r=t[j];if(n.html){var o=n.html;o=o.replace(/{{lang}}/g,r),a+=o}}}return a},a17cms.Helpers.sirTrevorBaseResourceEditor=function(e){var e=e||{},t={bt_label:"Add",bt_label_remove:"Remove",note:"",name:"resource_id",display_name:"resource"},a="undefined"!=typeof BLOCK_LANGUAGES?BLOCK_LANGUAGES:"undefined"!=typeof DEFAULT_BLOCK_LANGUAGE?[DEFAULT_BLOCK_LANGUAGE]:["en"];$.extend(!0,t,e);var i=""!=t.note?"<small class='a17-small-note hint' style='display:inline-block; margin-left:15px;'>"+t.note+"</small>":"",n="",r="<div class='columns'>";for(r+="<div class='col'>",j=0;j<a.length;j++){var o=a[j],l="<div class='input field_with_lang' data-lang='"+o+"'>";l+="<label>Attached "+t.display_name+"<span class='lang_tag' data-behavior='lang_toggle'>"+o+"</span></label>",l+="<div class='input' data-resources-containers>",l+="<input type='hidden' class='a17-input-block' name='"+t.name+"_"+o+"' autocomplete='false' data-resource-id />",l+="<input type='hidden' class='a17-input-block' name='"+t.name+"_title_"+o+"' autocomplete='false' data-resource-title-input />",l+="<button type='button' class='btn btn-small' data-bt-resource>"+t.bt_label+"</button> ",l+="<button type='button' class='btn btn-small btn-light' data-remove-resource>"+t.bt_label_remove+"</button>",l+="<small class='a17-small-note' style='display:inline-block; margin-left:15px;' data-resource-title></small>"+i,l+="</div>",l+="</div>",r+=l,n+="<option value='"+o+"'>Always use the "+t.display_name+" attached to "+o+"</option>"}return r+="</div>",a.length>1&&(r+="<div class='col'>",r+="<div class='input'>",r+="<label>Attached "+t.display_name+" settings</label>",r+="<select name='resource_locale' class='a17-input-block' data-behavior='selector' data-minimum-results-for-search='10'>",r+="<option value='1'>Unique "+t.display_name+" per language</option>",r+=n,r+="</select>",r+="</div>",r+="</div>"),r+="</div>"},a17cms.Helpers.sirTrevorBaseTextFields=function(e){var t="undefined"!=typeof BLOCK_LANGUAGES?BLOCK_LANGUAGES:"undefined"!=typeof DEFAULT_BLOCK_LANGUAGE?[DEFAULT_BLOCK_LANGUAGE]:["en"],a="";for(i=0;i<e.length;i++){var n=e[i];if(!n.html){switch(n.html="<div class='input field_with_lang' data-lang='{{lang}}'>",n.html+="<label>"+n.label+"<span class='lang_tag' data-behavior='lang_toggle'>{{lang}}</span></label>",n.label=void 0===n.label?"text":n.label,n.placeholder=void 0===n.placeholder?"":n.placeholder,n.maxlength=void 0===n.maxlength?"500":n.maxlength,n.type=void 0===n.type?"input":n.type,n.type){case"input":n.html+="<input type='text' class='a17-input-block' name='"+n.name+"_{{lang}}' maxlength='"+n.maxlength+"' placeholder='"+n.placeholder+"' autocomplete='false' />";break;case"textarea":n.html+="<textarea class='a17-input-block' name='"+n.name+"_{{lang}}' maxlength='"+n.maxlength+"' placeholder='"+n.placeholder+"' />";break;case"medium_textarea":n.html+="<textarea class='a17-input-block a17-input-medium-editor textarea-medium-editor' name='"+n.name+"_{{lang}}' rows='20' data-medium-editor-show-button='Display source code' data-medium-editor-hide-button='Hide source code' />"}n.html+="</div>"}for(j=0;j<t.length;j++){var r=t[j];if(n.html){var o=n.html;o=o.replace(/{{lang}}/g,r),a+=o}}}return a},a17cms.Helpers.callbackUpdateCropData=function(e){var t=$("#"+e.role),a=$("[data-crop]",t);e&&a.val(JSON.stringify(e.data))},a17cms.Helpers.callbackUpdateImageId=function(e){var t=$("#"+e.role),a=$("[data-image-id]",t),i=e.data[0],n=i.id;n&&(a.val(n),a.trigger("refresh:image_thumbnails"),a.trigger("show:crop_button"),a.trigger("show:remove_button"),$("[data-crop]",t).val(""))},a17cms.Helpers.callbackUpdateImageIds=function(e){var t=10,a=$("#"+e.role),i=$("[data-image-id]",a),n=i.val(),r=e.data[0],o=r.id;if(o){var l=n.split(",").map(Number);""!=n?l.length:0;if(l.length>t)return!1;var s=l.indexOf(Number(o));if(s==-1){var d=""!=n?n+",":n;i.val(d+o),i.trigger("refresh:image_thumbnails"),i.trigger("show:crop_button"),$("[data-crop]",a).val("")}}},a17cms.Helpers.callbackUpdateResourceId=function(e){var t=$("#"+e.role),a=$("[data-resource-id]",t),i=$("[data-resource-title-input]",t),n=e.data[0],r=n.id;r&&(a.val(r),"undefined"!=typeof n.resourceName&&null!==n.resourceName&&i.val(n.resourceName),a.trigger("refresh:resource_id"))},SirTrevor.Blocks.Blockquote=function(){var e=a17cms.Helpers.sirTrevorBaseTextFields([{name:"text",label:"Quote",type:"textarea",maxlength:"500",placeholder:"Enter Quote here"}]);return SirTrevor.Blocks.Masterpreview.extend({type:"blockquote",title:"Quote",icon_name:"quote",editorHTML:a17cms.Helpers.sirTrevorBaseEditor("",e),validations:["requireQuote"],requireQuote:function(){var e=this,t=e.$editor.find('[name="text_en"]');""===t.val()&&e.setError(t,"Quote can't be empty.")}})}(),SirTrevor.Blocks.Blockseparator=function(){var e="<hr class='ThinLine' /><input type='hidden' class='a17-input-block' name='active' value='true' />";return SirTrevor.Blocks.Masterpreview.extend({type:"blockseparator",title:"Separator",icon_name:"separator",editorHTML:a17cms.Helpers.sirTrevorBaseEditor("Separator",e)})}(),SirTrevor.Blocks.Blocktext=function(){var e=a17cms.Helpers.sirTrevorBaseTextFields([{name:"html",label:"Text",type:"medium_textarea"}]);return SirTrevor.Blocks.Masterpreview.extend({type:"blocktext",title:"Text",icon_name:"text",editorHTML:a17cms.Helpers.sirTrevorBaseEditor("",e)})}(),SirTrevor.Blocks.Blocktitle=function(){var e=a17cms.Helpers.sirTrevorBaseTextFields([{name:"title",label:"Title",type:"input",maxlength:"100"}]);return SirTrevor.Blocks.Masterpreview.extend({type:"blocktitle",title:"Title",icon_name:"text",editorHTML:a17cms.Helpers.sirTrevorBaseEditor("",e),validations:["requireTitle"],requireTitle:function(){var e=this,t=e.$editor.find('[name="title_en"]');""===t.val()&&e.setError(t,"Title can't be empty.")}})}(),SirTrevor.Blocks.Button=function(){var e=a17cms.Helpers.sirTrevorBaseTextFields([{name:"label",label:"Button Label",type:"input",maxlength:"100"},{name:"url",label:"Button link URL (if no file attached)",type:"input",maxlength:"500"}]),t=a17cms.Helpers.sirTrevorBaseResourceEditor({note:"Pease link the button to an existing file",display_name:"file"});return SirTrevor.Blocks.Masterpreview.extend({type:"button",title:"Button",icon_name:"image",editorHTML:a17cms.Helpers.sirTrevorBaseEditor("Button",e+t)})}(),SirTrevor.Blocks.Image=function(){var e=a17cms.Helpers.sirTrevorBaseImageEditor({note:"Required sizes : min-width: 2100px – min-height: 1410px"});return SirTrevor.Blocks.Masterpreview.extend({type:"image",title:"Image",icon_name:"image",editorHTML:a17cms.Helpers.sirTrevorBaseEditor("Image",e),validations:["requireImage"],requireImage:function(){var e=this,t=e.$editor.find('[name="image_id"]');""===t.val()&&e.setError(t,"You need to have one image.")}})}(),SirTrevor.Blocks.Diaporama=function(){var e=a17cms.Helpers.sirTrevorBaseDiaporamaEditor({note:"Required sizes : min-width: 2100px – min-height: 1410px"}),t=a17cms.Helpers.sirTrevorBaseTextFields([{name:"title",label:"Title",type:"input",maxlength:"150"}]);return SirTrevor.Blocks.Masterdiaporama.extend({type:"diaporama",title:"Diaporama",icon_name:"image",editorHTML:a17cms.Helpers.sirTrevorBaseEditor("Diaporama",t+e)})}(),SirTrevor.Blocks.Imagegrid=function(){var e=a17cms.Helpers.sirTrevorBaseImageEditor({note:"Required sizes : min-width: 800px – min-height: 800px",bt_label:"Add Left Image",bt_label_remove:"Remove Left Image",name:"image_left_id",crop_field_name:"image_left_id_crop"}),t=a17cms.Helpers.sirTrevorBaseImageEditor({note:"Required sizes : min-width: 800px – min-height: 800px",bt_label:"Add Right Image",bt_label_remove:"Remove Right Image",name:"image_right_id",crop_field_name:"image_right_id_crop"});return SirTrevor.Blocks.Masterpreview.extend({type:"imagegrid",title:"Two images",icon_name:"image",editorHTML:a17cms.Helpers.sirTrevorBaseEditor("Two images",e+t),validations:["requireImageLeft","requireImageRight"],requireImageLeft:function(){var e=this,t=e.$editor.find('[name="image_left_id"]');""===t.val()&&e.setError(t,"You need to have one image in the left column.")},requireImageRight:function(){var e=this,t=e.$editor.find('[name="image_right_id"]');""===t.val()&&e.setError($images,"You need to have one image in the right column.")}})}(),SirTrevor.Blocks.Imagetext=function(){var e=a17cms.Helpers.sirTrevorBaseImageEditor({note:"Required sizes : min-width: 800px – min-height: 800px"}),t=a17cms.Helpers.sirTrevorBaseTextFields([{name:"title",label:"Title",type:"input",maxlength:"100",placeholder:""},{name:"text",label:"Text",type:"textarea"}]);return t+="<div class='input'>",t+="<label>Image position</label>",t+="<select name='image_position' class='a17-input-block' data-behavior='selector' data-minimum-results-for-search='3' data-selector-width='25%'>",t+="<option value='1'>Left</option>",t+="<option value='0'>Right</option>",t+="</select>",t+="</div>",SirTrevor.Blocks.Masterpreview.extend({type:"imagetext",title:"Image + text",icon_name:"image",editorHTML:a17cms.Helpers.sirTrevorBaseEditor("Image + text",e+t),validations:["requireImage"],requireImage:function(){var e=this,t=e.$editor.find('[name="image_id"]');""===t.val()&&e.setError(t,"You need to have one image.")}})}();